<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#007AFF">
    <title>å°å­¦è‹±è¯­çŒœè¯æ¸¸æˆ</title>
    <style>
        :root {
            --ios-blue: #007AFF;
            --ios-gray: #8E8E93;
            --ios-light-gray: #F2F2F7;
            --ios-dark-gray: #1C1C1E;
            --ios-green: #34C759;
            --ios-red: #FF3B30;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--ios-light-gray);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            color: var(--ios-dark-gray);
        }

        .container {
            max-width: 100%;
            width: 100%;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 15px;
            margin-top: 10px;
        }

        h1 {
            color: var(--ios-dark-gray);
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: 600;
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .mode-btn {
            padding: 10px 20px;
            font-size: 14px;
        }

        .grade-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .grade-btn {
            padding: 10px 5px;
            font-size: 14px;
        }

        .game-area {
            text-align: center;
            padding: 0 10px;
        }

        .word-display {
            font-size: 20px;
            margin: 15px 0;
        }

        .phonetic {
            font-size: 14px;
            margin-bottom: 8px;
        }

        .example {
            font-size: 14px;
            margin: 10px 0;
            padding: 12px;
        }

        .input-mode-container {
            margin: 15px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .hint-section {
            width: 100%;
            max-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .hint-letters {
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 5px;
            width: 100%;
            overflow-x: auto;
            padding: 5px 0;
        }

        .hint-letter {
            min-width: 30px;
            width: 30px;
            height: 40px;
            border: 2px solid var(--ios-gray);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 500;
            background: var(--ios-light-gray);
            flex-shrink: 0;
        }

        .hint-letter.revealed {
            border-color: var(--ios-blue);
            color: var(--ios-blue);
            background: white;
        }

        .hint-letters-container {
            display: flex;
            flex-direction: row;
            gap: 5px;
        }

        .input-section {
            width: 100%;
            max-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--ios-gray);
            border-radius: 10px;
            font-size: 16px;
            text-align: center;
            background: var(--ios-light-gray);
        }

        .button-group {
            display: flex;
            gap: 10px;
            width: 100%;
            justify-content: center;
        }

        .submit-btn, .show-answer-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .submit-btn {
            background: var(--ios-blue);
            color: white;
        }

        .show-answer-btn {
            background: var(--ios-gray);
            color: white;
        }

        .answer-display {
            font-size: 14px;
            color: var(--ios-blue);
            font-weight: 500;
            margin-top: 5px;
            display: none;
        }

        .options-container {
            grid-template-columns: 1fr;
            gap: 8px;
            margin: 15px 0;
        }

        .option-btn {
            padding: 12px;
            font-size: 14px;
        }

        .result {
            margin: 10px 0;
            font-size: 14px;
            padding: 8px;
        }

        .score {
            margin: 10px 0;
            font-size: 16px;
        }

        .instructions {
            margin-top: 15px;
            padding: 12px;
        }

        .instructions h3 {
            font-size: 14px;
            margin-bottom: 8px;
        }

        .instructions p {
            font-size: 12px;
            margin-bottom: 4px;
        }

        .speak-btn {
            background: var(--ios-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .speak-btn:hover {
            background: #0056b3;
        }

        .speak-btn:active {
            transform: scale(0.95);
        }

        .speak-btn i {
            font-size: 16px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 12px;
            }

            .title {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .grade-btn, .submit-btn, .show-answer-btn, .option-btn {
                padding: 10px;
                font-size: 14px;
            }

            .word-display {
                font-size: 20px;
            }

            .phonetic, .example {
                font-size: 14px;
            }
        }

        /* æš—è‰²æ¨¡å¼æ”¯æŒ */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #000000;
                color: #FFFFFF;
            }

            .title {
                color: #FFFFFF;
            }

            .grade-btn, .input-field {
                background-color: #1C1C1E;
                border-color: #38383A;
                color: #FFFFFF;
            }

            .game-area {
                background-color: #1C1C1E;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }

            .word-display, .example {
                color: #FFFFFF;
            }

            .phonetic {
                color: #8E8E93;
            }

            .submit-btn, .show-answer-btn {
                background-color: #38383A;
                color: #FFFFFF;
            }

            .option-btn {
                background-color: #1C1C1E;
                border-color: #38383A;
                color: #FFFFFF;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å°å­¦è‹±è¯­çŒœè¯æ¸¸æˆ</h1>
        
        <div class="mode-selector">
            <button class="mode-btn" data-mode="input">è¾“å…¥æ¨¡å¼</button>
            <button class="mode-btn" data-mode="choice">é€‰æ‹©é¢˜æ¨¡å¼</button>
        </div>

        <div class="grade-selector">
            <button class="grade-btn" data-grade="1">ä¸€å¹´çº§</button>
            <button class="grade-btn" data-grade="2">äºŒå¹´çº§</button>
            <button class="grade-btn" data-grade="3">ä¸‰å¹´çº§</button>
            <button class="grade-btn" data-grade="4">å››å¹´çº§</button>
            <button class="grade-btn" data-grade="5">äº”å¹´çº§</button>
            <button class="grade-btn" data-grade="6">å…­å¹´çº§</button>
        </div>

        <div class="game-area">
            <div class="word-display">
                <div class="word"></div>
                <button class="speak-btn">
                    <i>ğŸ”Š</i> å‘éŸ³
                </button>
            </div>
            <div class="phonetic"></div>
            <div class="example"></div>
            <div class="input-mode-container">
                <div class="hint-section">
                    <div class="hint-letters">
                        <div class="hint-letters-container"></div>
                    </div>
                </div>
                <div class="input-section">
                    <input type="text" id="answer-input" placeholder="è¯·è¾“å…¥ç­”æ¡ˆ">
                    <div class="button-group">
                        <button class="submit-btn">æäº¤</button>
                        <button class="show-answer-btn">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    </div>
                    <div class="answer-display"></div>
                </div>
            </div>
            <div class="options-container" style="display: none;">
                <button class="option-btn" data-option="1"></button>
                <button class="option-btn" data-option="2"></button>
                <button class="option-btn" data-option="3"></button>
                <button class="option-btn" data-option="4"></button>
            </div>
            <div class="result"></div>
            <div class="score">å¾—åˆ†: <span id="score">0</span></div>
        </div>

        <div class="instructions">
            <h3>æ¸¸æˆè¯´æ˜ï¼š</h3>
            <p>1. é€‰æ‹©å¹´çº§å’Œæ¸¸æˆæ¨¡å¼ï¼ˆè¾“å…¥æ¨¡å¼/é€‰æ‹©é¢˜æ¨¡å¼ï¼‰</p>
            <p>2. è¾“å…¥æ¨¡å¼ï¼šæ ¹æ®ä¸­æ–‡æ„æ€è¾“å…¥è‹±æ–‡å•è¯ï¼Œä¼šæ˜¾ç¤ºéƒ¨åˆ†å­—æ¯æç¤º</p>
            <p>3. é€‰æ‹©é¢˜æ¨¡å¼ï¼šä»å››ä¸ªé€‰é¡¹ä¸­é€‰æ‹©æ­£ç¡®çš„è‹±æ–‡å•è¯å¡«ç©º</p>
            <p>4. ç­”å¯¹ä¸€é¢˜å¾—10åˆ†ï¼Œç­”é”™å¯ä»¥é‡è¯•</p>
            <p>5. æ¯ä¸ªå•è¯éƒ½é…æœ‰éŸ³æ ‡å’Œä¾‹å¥ï¼Œå¸®åŠ©å­¦ä¹ </p>
        </div>
    </div>

    <script>
        // ä»localStorageåŠ è½½å¯¼å…¥çš„æ•°æ®
        const wordDatabase = JSON.parse(localStorage.getItem('wordDatabase')) || {
            // é»˜è®¤é¢˜åº“
            1: [
                { word: "apple", meaning: "è‹¹æœ", phonetic: "/ËˆÃ¦pl/", example: "I like to eat an apple. æˆ‘å–œæ¬¢åƒè‹¹æœã€‚" },
                { word: "book", meaning: "ä¹¦", phonetic: "/bÊŠk/", example: "This is my book. è¿™æ˜¯æˆ‘çš„ä¹¦ã€‚" }
            ]
        };

        let currentGrade = null;
        let currentWord = null;
        let score = 0;
        let currentMode = 'input';
        let revealedLetters = [];

        // é€‰æ‹©æ¸¸æˆæ¨¡å¼
        document.querySelectorAll('.mode-btn').forEach(button => {
            button.addEventListener('click', () => {
                currentMode = button.dataset.mode;
                document.querySelectorAll('.mode-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                if (currentMode === 'choice') {
                    document.querySelector('.options-container').style.display = 'grid';
                    document.querySelector('.input-mode-container').style.display = 'none';
                } else {
                    document.querySelector('.options-container').style.display = 'none';
                    document.querySelector('.input-mode-container').style.display = 'flex';
                }
                
                if (currentGrade) {
                    startNewGame();
                }
            });
        });

        // é€‰æ‹©å¹´çº§
        document.querySelectorAll('.grade-btn').forEach(button => {
            button.addEventListener('click', () => {
                currentGrade = parseInt(button.dataset.grade);
                document.querySelectorAll('.grade-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                startNewGame();
            });
        });

        // å¼€å§‹æ–°æ¸¸æˆ
        function startNewGame() {
            window.speechSynthesis.cancel(); // åœæ­¢æ‰€æœ‰è¯­éŸ³
            const words = wordDatabase[currentGrade];
            currentWord = words[Math.floor(Math.random() * words.length)];
            
            document.querySelector('.word').textContent = currentWord.meaning;
            document.querySelector('.phonetic').textContent = currentWord.phonetic;
            document.querySelector('.answer-display').style.display = 'none';
            
            // åœ¨ä¾‹å¥ä¸­åˆ›å»ºç©ºç™½ï¼ˆä¸¤ç§æ¨¡å¼éƒ½é€‚ç”¨ï¼‰
            if (currentWord.example && currentWord.example.includes(currentWord.word)) {
                const exampleParts = currentWord.example.split(currentWord.word);
                const blankExample = `${exampleParts[0]}<span class="blank-word">_____</span>${exampleParts[1]}`;
                document.querySelector('.example').innerHTML = blankExample;
            } else {
                document.querySelector('.example').textContent = currentWord.example || '';
            }
            
            if (currentMode === 'choice') {
                // è®¾ç½®é€‰é¡¹
                const options = getRandomOptions(words, currentWord);
                document.querySelectorAll('.option-btn').forEach((btn, index) => {
                    btn.textContent = options[index].word;
                    btn.classList.remove('correct', 'wrong');
                });
            } else {
                // è®¾ç½®å­—æ¯æç¤º
                setupHintLetters();
            }
            
            document.querySelector('.result').textContent = '';
            document.querySelector('.result').className = 'result';
            document.getElementById('answer-input').value = '';
        }

        // è®¾ç½®å­—æ¯æç¤º
        function setupHintLetters() {
            const hintLettersContainer = document.querySelector('.hint-letters-container');
            hintLettersContainer.innerHTML = '';
            revealedLetters = [];
            
            const wordLength = currentWord.word.length;
            const lettersToReveal = Math.ceil(wordLength / 3); // æ˜¾ç¤º1/3çš„å­—æ¯
            
            // éšæœºé€‰æ‹©è¦æ˜¾ç¤ºçš„å­—æ¯ä½ç½®
            while (revealedLetters.length < lettersToReveal) {
                const randomIndex = Math.floor(Math.random() * wordLength);
                if (!revealedLetters.includes(randomIndex)) {
                    revealedLetters.push(randomIndex);
                }
            }
            
            // åˆ›å»ºå­—æ¯æç¤ºæ¡†
            for (let i = 0; i < wordLength; i++) {
                const letterBox = document.createElement('div');
                letterBox.className = 'hint-letter';
                if (revealedLetters.includes(i)) {
                    letterBox.textContent = currentWord.word[i];
                    letterBox.classList.add('revealed');
                }
                hintLettersContainer.appendChild(letterBox);
            }
        }

        // è·å–éšæœºé€‰é¡¹
        function getRandomOptions(words, correctWord) {
            const options = [correctWord];
            while (options.length < 4) {
                const randomWord = words[Math.floor(Math.random() * words.length)];
                if (!options.includes(randomWord)) {
                    options.push(randomWord);
                }
            }
            return shuffleArray(options);
        }

        // æ‰“ä¹±æ•°ç»„é¡ºåº
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // æäº¤ç­”æ¡ˆï¼ˆè¾“å…¥æ¨¡å¼ï¼‰
        document.querySelector('.submit-btn').addEventListener('click', () => {
            const userAnswer = document.getElementById('answer-input').value.toLowerCase();
            checkAnswer(userAnswer);
        });

        // é€‰æ‹©ç­”æ¡ˆï¼ˆé€‰æ‹©é¢˜æ¨¡å¼ï¼‰
        document.querySelectorAll('.option-btn').forEach(button => {
            button.addEventListener('click', () => {
                const userAnswer = button.textContent;
                checkAnswer(userAnswer);
            });
        });

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer(userAnswer) {
            const resultDiv = document.querySelector('.result');
            
            if (userAnswer === currentWord.word) {
                score += 10;
                resultDiv.textContent = 'å›ç­”æ­£ç¡®ï¼';
                resultDiv.className = 'result correct';
                document.getElementById('score').textContent = score;
                
                if (currentMode === 'choice') {
                    document.querySelectorAll('.option-btn').forEach(btn => {
                        if (btn.textContent === currentWord.word) {
                            btn.classList.add('correct');
                        }
                    });
                }
                
                // æ˜¾ç¤ºå®Œæ•´ä¾‹å¥
                const exampleElement = document.querySelector('.example');
                const fullExample = currentWord.example;
                exampleElement.innerHTML = fullExample;
                
                setTimeout(startNewGame, 1500);
            } else {
                resultDiv.textContent = 'å›ç­”é”™è¯¯ï¼Œè¯·é‡è¯•ï¼';
                resultDiv.className = 'result wrong';
                
                if (currentMode === 'choice') {
                    document.querySelectorAll('.option-btn').forEach(btn => {
                        if (btn.textContent === userAnswer) {
                            btn.classList.add('wrong');
                        }
                    });
                }
            }
        }

        // æŒ‰å›è½¦é”®æäº¤
        document.getElementById('answer-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.querySelector('.submit-btn').click();
            }
        });

        // æ˜¾ç¤ºç­”æ¡ˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.querySelector('.show-answer-btn').addEventListener('click', () => {
            const answerDisplay = document.querySelector('.answer-display');
            answerDisplay.textContent = `æ­£ç¡®ç­”æ¡ˆ: ${currentWord.word}`;
            answerDisplay.style.display = 'block';
            
            // 3ç§’åè‡ªåŠ¨éšè—ç­”æ¡ˆ
            setTimeout(() => {
                answerDisplay.style.display = 'none';
            }, 3000);
        });

        // æ£€æŸ¥æµè§ˆå™¨å…¼å®¹æ€§
        function checkBrowserCompatibility() {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
            
            if (isIOS && !isSafari) {
                alert('å»ºè®®ä½¿ç”¨Safariæµè§ˆå™¨ä»¥è·å¾—æœ€ä½³ä½“éªŒ');
            }
            
            if (!('speechSynthesis' in window)) {
                console.warn('å½“å‰æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆåŠŸèƒ½');
            }
        }

        // åœ¨é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥å…¼å®¹æ€§
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(checkBrowserCompatibility, 1000);
        });

        // è¯­éŸ³åˆæˆåŠŸèƒ½
        function speakWord(word) {
            if ('speechSynthesis' in window) {
                try {
                    // ç¡®ä¿åœæ­¢æ‰€æœ‰æ­£åœ¨æ’­æ”¾çš„è¯­éŸ³
                    window.speechSynthesis.cancel();
                    
                    // ç­‰å¾…ä¸€å°æ®µæ—¶é—´ç¡®ä¿æ¸…ç†å®Œæˆ
                    setTimeout(() => {
                        // è·å–æ‰€æœ‰å¯ç”¨çš„è¯­éŸ³
                        const voices = window.speechSynthesis.getVoices();
                        const englishVoice = voices.find(voice => voice.lang.includes('en'));
                        
                        if (!englishVoice) {
                            useBackupSpeech(word);
                            return;
                        }

                        // åˆ›å»ºæ–°çš„è¯­éŸ³å®ä¾‹
                        const utterance = new SpeechSynthesisUtterance(word);
                        
                        // è®¾ç½®è¯­éŸ³å‚æ•°
                        utterance.voice = englishVoice;
                        utterance.lang = 'en-US';
                        utterance.rate = 0.8;
                        utterance.pitch = 1.0;
                        utterance.volume = 1.0;
                        
                        // æ·»åŠ é”™è¯¯å¤„ç†
                        utterance.onerror = function(event) {
                            console.error('è¯­éŸ³åˆæˆé”™è¯¯:', event);
                            useBackupSpeech(word);
                        };
                        
                        // æ·»åŠ å¼€å§‹äº‹ä»¶å¤„ç†
                        utterance.onstart = function() {
                            console.log('å¼€å§‹æ’­æ”¾è¯­éŸ³');
                        };
                        
                        // æ·»åŠ å®Œæˆäº‹ä»¶å¤„ç†
                        utterance.onend = function() {
                            console.log('è¯­éŸ³æ’­æ”¾å®Œæˆ');
                            // ç¡®ä¿æ¸…ç†è¯­éŸ³åˆæˆå™¨
                            window.speechSynthesis.cancel();
                        };
                        
                        // æ’­æ”¾è¯­éŸ³
                        window.speechSynthesis.speak(utterance);
                    }, 100);
                } catch (error) {
                    console.error('è¯­éŸ³åˆæˆå¼‚å¸¸:', error);
                    useBackupSpeech(word);
                }
            } else {
                useBackupSpeech(word);
            }
        }

        // å¤‡ç”¨è¯­éŸ³åˆæˆæ–¹æ³•
        function useBackupSpeech(word) {
            // ä½¿ç”¨ç™¾åº¦è¯­éŸ³åˆæˆAPI
            const audio = new Audio();
            // ä½¿ç”¨ç™¾åº¦ç¿»è¯‘çš„è¯­éŸ³API
            audio.src = `https://fanyi.baidu.com/gettts?lan=en&text=${encodeURIComponent(word)}&spd=3&source=web`;
            
            audio.onerror = function() {
                console.error('å¤‡ç”¨è¯­éŸ³æ’­æ”¾å¤±è´¥');
                // å¦‚æœç™¾åº¦APIä¹Ÿå¤±è´¥ï¼Œå°è¯•ä½¿ç”¨æœ¬åœ°è¯­éŸ³æ–‡ä»¶
                tryLocalAudio(word);
            };
            
            audio.play().catch(error => {
                console.error('æ’­æ”¾éŸ³é¢‘å¤±è´¥:', error);
                // å¦‚æœæ’­æ”¾å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨æœ¬åœ°è¯­éŸ³æ–‡ä»¶
                tryLocalAudio(word);
            });
        }

        // å°è¯•ä½¿ç”¨æœ¬åœ°è¯­éŸ³æ–‡ä»¶
        function tryLocalAudio(word) {
            // ä½¿ç”¨æœ¬åœ°é¢„å½•åˆ¶çš„è¯­éŸ³æ–‡ä»¶
            const audio = new Audio();
            // è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€äº›å¸¸ç”¨å•è¯çš„æœ¬åœ°è¯­éŸ³æ–‡ä»¶
            const localAudioMap = {
                'apple': 'audio/apple.mp3',
                'book': 'audio/book.mp3',
                // å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤šå•è¯çš„è¯­éŸ³æ–‡ä»¶
            };
            
            if (localAudioMap[word]) {
                audio.src = localAudioMap[word];
                audio.play().catch(error => {
                    console.error('æ’­æ”¾æœ¬åœ°éŸ³é¢‘å¤±è´¥:', error);
                    alert('è¯­éŸ³æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç³»ç»Ÿå£°éŸ³è®¾ç½®ã€‚');
                });
            } else {
                alert('æš‚ä¸æ”¯æŒè¯¥å•è¯çš„è¯­éŸ³æ’­æ”¾ã€‚');
            }
        }

        // ä¸ºå‘éŸ³æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelector('.speak-btn').addEventListener('click', function() {
            // ç¡®ä¿åœæ­¢æ‰€æœ‰æ­£åœ¨æ’­æ”¾çš„è¯­éŸ³
            window.speechSynthesis.cancel();
            
            const exampleElement = document.querySelector('.example');
            let exampleText = exampleElement.textContent;
            
            // å¦‚æœä¾‹å¥ä¸­åŒ…å«ç©ºç™½éƒ¨åˆ†ï¼Œæ›¿æ¢ä¸ºå®é™…å•è¯
            if (exampleText.includes('_____') && currentWord) {
                exampleText = exampleText.replace('_____', currentWord.word);
            }
            
            if (exampleText && exampleText !== 'undefined') {
                // åªæ’­æ”¾è‹±æ–‡éƒ¨åˆ†
                const englishPart = exampleText.split('ã€‚')[0].trim();
                if (englishPart) {
                    speakWord(englishPart);
                }
            }
        });

        // æ·»åŠ è§¦æ‘¸äº‹ä»¶æ”¯æŒ
        document.addEventListener('touchstart', function(e) {
            if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') {
                e.target.classList.add('active');
            }
        }, false);

        document.addEventListener('touchend', function(e) {
            if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') {
                e.target.classList.remove('active');
            }
        }, false);

        // é˜²æ­¢åŒå‡»ç¼©æ”¾
        document.addEventListener('dblclick', function(e) {
            e.preventDefault();
        }, false);
    </script>
</body>
</html> 